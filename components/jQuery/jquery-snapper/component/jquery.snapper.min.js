(function(d){function C(a,b,c,e,k){d.support.transition&&a.transit?a.transit(b,c,e,k):a.animate(b,c,e,k)}function G(a,b){var c,e;return Math.round(Math.sqrt((e=a.top-b.top)*e+(c=a.left-b.left)*c))}function y(a,b,c){var e={},k=a[0];d.each(b,function(a){e[a]=k.style[a];"opacity"===a&&(e.filter=k.style.filter)});a.data("_savedstyle_"+c,e);a.css(b)}function z(a,b){b="_savedstyle_"+b;var c=a.data(b);if(c){var e=a[0];d.each(c,function(a,b){try{e.style[a]=b,void 0!==b&&null!==b&&""!==b||delete e.style[a]}catch(c){}});
a.removeData(b)}}function n(a){a.children().each(function(){z(d(this),"fix")});z(a,"fix")}function s(a){var b=a.children();y(a,{height:a.css("height"),width:a.css("width")},"fix");var c=[];b.each(function(a){var b=d(this),l=b.position();c[a]={position:"absolute",top:l.top,left:l.left,height:b.css("height"),width:b.css("width")}});b.each(function(a){y(d(this),c[a],"fix")})}function L(a,b){return a&&function(){a.call(b)}}function q(a){var b=parseInt(a);a=a.substring((""+b).length);return"m"===a||"min"===
a?6E4*b:"s"===a||"sec"===a?1E3*b:b}function A(a,b,c){c=q(c);return Math.max(G(a.offset(),b)*c/200,c||200)}function t(a,b){b.width=a.css("width");b.height=a.css("height");return b}function u(a){var b=[];a.children().each(function(){var a=d(this);b.push(t(a,a.position()))});b.push(t(a,{}));return b}function g(a,b,c){var e=a.children();c<e.length?b.insertBefore(e[c]):b.appendTo(a)}function v(a,b,c,e,d,l){C(a,b,c,e,L(d,l))}function w(a,b,c,e){var k=a.children();C(a,b[k.length],c,e);k.each(function(a){C(d(this),
b[a],c,e)})}function H(a,b){b=b||a.offset();return{top:b.top+Math.round(a.innerHeight()/2),left:b.left+Math.round(a.innerWidth()/2)}}function I(){d(this).off("done.snapper",I);f="idle"}function J(a){var b=d(this),c=b.data("snapper");b.off("drop.snapper",J);b.on("done.snapper",I);f="snap";d(".snapper").each(function(){if(d(this).data("snapper").make(c))return a.preventDefault(),!1});a.isDefaultPrevented()||c.drop()}function M(a){var b=d(this),c=a.data,e=a.originalEvent.touches;"hold"===f?(void 0===
document.body.style["-ms-touch-action"]||2!==a.originalEvent.pointerType&&3!==a.originalEvent.pointerType&&"touch"!==a.originalEvent.pointerType&&"pen"!==a.originalEvent.pointerType?f="drag":(f="next",y(d(document.body),{"-ms-touch-action":"none"},"mstouch")),c.startDrag(b,e?e[0]:a),p=setTimeout(function(){m(a)},q(c.timeout))):(D(e),f="idle")}function r(a){var b=a.originalEvent.touches,c=a.data;"drag"===f?(c.moveDrag(b?b[0]:a),window.getSelection?window.getSelection().removeAllRanges():document.selection&&
document.selection.clear&&document.selection.clear(),clearTimeout(p),p=setTimeout(function(){m(a)},q(c.timeout)),a.preventDefault(),a.stopPropagation()):"hold"!==f||!b&&a.pageX===E.pageX&&a.pageY===E.pageY||(f="idle",clearTimeout(F),D(b))}function m(a){var b=a.originalEvent.touches;if("next"===f)f="drag";else if(D(b),"drag"===f){var c=a.data;b||c.moveDrag(a);clearTimeout(p);f="drop";d(c.self).on("drop.snapper",J);c.stopDrag();z(d(document.body),"mstouch")}else"hold"===f?(f="idle",clearTimeout(F)):
f="idle"}function K(a){if("idle"===f){var b=d(this),c=a.data=b.parent().data("snapper"),e=a.originalEvent.touches;f="hold";F=setTimeout(function(){M.call(b[0],a)},q(c.taphold));E=a;N(e,c)}}function N(a,b){a?(d(document).on("touchmove.snapper",b,r),d(document).on("touchend.snapper touchcancel.snapper",b,m)):(d(document).on("mousemove.snapper",b,r),d(document).on("mouseup.snapper",b,m))}function D(a){a?(d(document).off("touchmove.snapper",r),d(document).off("touchend.snapper touchcancel.snapper",m)):
(d(document).off("mousemove.snapper",r),d(document).off("mouseup.snapper",m))}function B(a,b){var c=this;c.self=a;b=b||{};d.each(b,function(a,b){a=d.camelCase(a);B.prototype.hasOwnProperty(a)&&(c[a]=b)});a.addClass("snapper");var e=a.children();if(!b["data-api"])e.on("mousedown.snapper touchstart.snapper",K)}d.easing["ease-out"]=d.easing.easeOutQuad||function(a,b,c,e,d){return e*((b=b/d-1)*b*b+1)+c};var f="idle",F,p,E;d.snapper=B.prototype;d.extend(B.prototype,{inertia:"200ms",speed:"200ms",taphold:"200ms",
timeout:"2s",easing:"ease-out","catch":"none",out:"remove",state:function(){return f},startDrag:function(a,b){this.item=a;var c=this.offset=a.offset();this.twin=a.clone().appendTo(document.body).css({position:"absolute",top:c.top,left:c.left,width:a.css("width"),height:a.css("height"),margin:0});y(a,{opacity:0,zoom:"normal"},"item");this.point=b={pageX:b.pageX,pageY:b.pageY,time:(new Date).getTime()};this.from=this.self.children().index(a);this.moves=[b];this.self.trigger({type:"drag.snapper",data:this})},
moveDrag:function(a){if(this.point.pageX!==a.pageX||this.point.pageY!==a.pageY){a={pageX:a.pageX,pageY:a.pageY,time:(new Date).getTime()};for(this.twin.css({top:this.offset.top+a.pageY-this.point.pageY,left:this.offset.left+a.pageX-this.point.pageX});4<this.moves.length;)this.moves.shift();this.moves.push(a)}},stopDrag:function(){var a=this.twin.offset(),b=this.moves[0],c=this.moves[this.moves.length-1],e=c.time-b.time,d=q(this.inertia);this.prediction={top:a.top+(0<e?(c.pageY-b.pageY)/e:0)*d,left:a.left+
(0<e?(c.pageX-b.pageX)/e:0)*d};this.self.trigger({type:"drop.snapper",data:this})},isCatch:function(a){var b=this["catch"];return b&&0<=b.indexOf(a)},fitIn:function(a){var b=this.self,c=b.offset(),e=parseInt(b.css("marginTop")),d=parseInt(b.css("marginLeft")),e=a.top-c.top+e;a=a.left-c.left+d;return(0<=e||this.isCatch("top"))&&(e<b.outerHeight(!0)||this.isCatch("bottom"))&&(0<=a||this.isCatch("left"))&&(a<b.outerWidth(!0)||this.isCatch("right"))},toIndex:function(a){var b=this.self,c=b.children(),
e=-1,k=0,f=b.width();c.each(function(b){var c=d(this),g=H(c),n=G(a,g);if(0>e||n<e)e=n,k=b,((b=f!==c.outerWidth(!0))&&a.left>g.left||!b&&a.top>g.top)&&k++});return k},make:function(a){var b=H(a.item,a.prediction);if(this.fitIn(b)){var b=this.toIndex(b),c=a.from;this===a?b===c?a.cancel():(a.to=b,a.shift()):"cancel"===a.out||"cancel"===this.out?a.cancel():(a.to=b,a.dest=this,"swap"===a.out||"swap"===this.out?a.swap():a.transfer());return!0}},shift:function(){var a=this.item,b=this.from,c=this.to;g(this.self,
a,c);var e=u(this.self),d=t(a,a.offset()),f=A(this.twin,d,this.speed);g(this.self,a,b>c?b+1:b);s(this.self);g(this.self,a,c);w(this.self,e,f,this.easing);v(this.twin,d,f,this.easing,function(){n(this.self);this.done()},this)},transfer:function(){var a=this,b=this.dest,c=this.item,e=this.from,d=this.to;g(b.self,c,d);var f=u(b.self),h=u(a.self),m=t(c,c.offset()),x=A(a.twin,m,a.speed);g(a.self,c,e);s(a.self);s(b.self);g(b.self,c,d);w(b.self,f,x,this.easing);w(a.self,h,x,this.easing);v(a.twin,m,x,a.easing,
function(){b.self.trigger({type:"snap.snapper",data:b});n(b.self);n(a.self);a.done()},a)},swap:function(){var a=this,b=this.dest,c=this.item,e=this.from,f=this.to,l=b.self.children(),h=d(f<l.length?l[f]:l[l.length-1]);g(b.self,c,f);g(a.self,h,e);var l=u(b.self),m=u(a.self),x=t(c,c.offset()),q=t(h,h.offset()),p=A(a.twin,x,a.speed);g(a.self,c,e);g(b.self,h,f);var r=h.clone().appendTo(document.body).css({position:"absolute",top:h.offset().top,left:h.offset().left,width:h.css("width"),height:h.css("height"),
margin:0});y(h,{opacity:0,zoom:"normal"},"item");s(a.self);s(b.self);g(b.self,c,f);g(a.self,h,e);w(b.self,l,p,this.easing);w(a.self,m,p,this.easing);v(r,q,p,a.easing);v(a.twin,x,p,a.easing,function(){b.self.trigger({type:"snap.snapper",data:b});r.remove();n(b.self);n(a.self);z(h,"item");a.done()},a)},cancel:function(){var a=this.twin.offset();a.top===this.offset.top&&a.left===this.offset.left?this.done():(a=A(this.twin,this.offset,this.speed),v(this.twin,this.offset,a,this.easing,this.done,this))},
drop:function(){"swap"===this.out?(this.dest=this,this.to=this.self.children().length,this.shift()):"cancel"===this.out?this.cancel():this.remove()},remove:function(){var a=this.self,b=this.item,c=A(this.twin,this.prediction,this.speed);b.remove();var e=u(a);g(a,b,this.from);s(a);b.remove();w(a,e,c,this.easing);v(this.twin,d.extend({},this.prediction,{opacity:0}),c,this.easing,function(){n(a);this.done()},this)},done:function(){this.self.trigger({type:"done.snapper",data:this});this.twin.remove();
delete this.twin;z(this.item,"item");delete this.item;delete this.point;delete this.moves;delete this.offset;delete this.prediction;delete this.dest;delete this.from;delete this.to}});d.fn.snapper=function(a){return this.each(function(){var b=d(this);b.data("snapper")||b.data("snapper",new B(b,d.extend({},b.data(),a)))})};d(document).on("mousedown.snapper.data-api touchstart.snapper.data-api",'[data-toggle="snapper"] > *',function(){d('[data-toggle="snapper"]').snapper({"data-api":!0});K.apply(this,
arguments)})})(jQuery);
